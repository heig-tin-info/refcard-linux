%\documentclass[10pt]{article}
\documentclass[9pt]{extarticle}

\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{heiglogo}
\usepackage[a4paper,landscape,margin=10mm]{geometry}
\usepackage{multicol}
\setlength{\columnsep}{5mm}
\setlength{\columnseprule}{0.4pt}

\usepackage{fontawesome}
\usepackage[most]{tcolorbox}
\usepackage{fontspec}
% \setmainfont{TeX Gyre Heros}
% \setsansfont{TeX Gyre Heros}
% \setmonofont{Inconsolata}
\renewcommand{\familydefault}{\sfdefault}

\usepackage[french]{babel}

\usepackage{microtype}
\usepackage{enumitem}
\setlist{nosep,leftmargin=1.1em}
\setlength{\parindent}{0pt}
\setlength{\parskip}{2pt}

\usepackage{listings}
\lstset{
  basicstyle=\ttfamily\footnotesize,
  columns=flexible,
  keepspaces=true,
  upquote=true,
  breaklines=true
}

\newtcbox{\inlinecode}{nobeforeafter,
  colframe=black!40, colback=black!5,
  boxrule=0.3pt, arc=2pt,
  boxsep=1pt, % padding global
  left=1.5pt, right=1.5pt, top=1.5pt, bottom=1.5pt, % marges internes
  tcbox raise base,
  fontupper=\ttfamily\footnotesize
}

\newcommand{\lstcode}[1]{\inlinecode{#1}}

\usepackage[os=win]{menukeys}
\renewmenumacro{\keys}[+]{roundedkeys}

\renewcommand{\familydefault}{\sfdefault}

\usepackage{titlesec}

% Tailles des titres (s'applique aussi aux versions étoilées *)
\titleformat{\section}
  {\sffamily\bfseries\fontsize{12}{15}\selectfont} % ajoute  si tu veux en gras
  {}{0pt}{}

\titleformat{\subsection}
  {\sffamily\bfseries\fontsize{10}{12}\selectfont}
  {}{0pt}{}

\titleformat{\subsubsection}
  {\sffamily\bfseries\fontsize{8}{10}\selectfont}
  {}{0pt}{}

% Espacements (les tiens, inchangés)
\titlespacing*{\section}{0pt}{0.1ex plus .1ex minus 0.1ex}{0.5ex plus .1ex minus 0.1ex}
\titlespacing*{\subsection}{0pt}{0.1ex plus .1ex minus 0.1ex}{0.5ex plus .1ex minus 0.1ex}
\titlespacing*{\subsubsection}{0pt}{0.1ex plus .1ex minus 0.1ex}{0.5ex plus .1ex minus 0.1ex}


\pagenumbering{gobble}

% \titlespacing*{\section}{0pt}{0.5ex plus .1ex minus 0.1ex}{0.5ex plus .1ex minus 0.1ex}
% \titlespacing*{\subsection}{0pt}{0.5ex plus .1ex minus 0.1ex}{0.5ex plus .1ex minus 0.1ex}
% \titlespacing*{\subsubsection}{0pt}{0.5ex plus .1ex minus 0.1ex}{0.5ex plus .1ex minus 0.1ex}

\newlength\mybaselinestretch
\mybaselinestretch=0pt plus 0.02pt\relax
\addtolength{\baselineskip}{\mybaselinestretch}

\setlength\parindent{0pt}
\setlength\tabcolsep{1.5pt}
\setlength{\columnseprule}{0.4pt}

\def\revision{1.0}
\def\revisiondate{2024-06-12}

% % Largeur de la colonne "commande" + écart
% \newlength{\cmdlabelwidth} \setlength{\cmdlabelwidth}{2.8cm} % ajuste au besoin
% \newlength{\cmdlabelsep}   \setlength{\cmdlabelsep}{0.4em}

% % Bloc de commandes compact
% \newenvironment{cmdblock}{%
%   \par\setlength{\parindent}{0pt}\setlength{\parskip}{0pt}%
% }{\par}

% % Une ligne "commande — description" compacte avec wrap automatique
% \newcommand{\cmditem}[2]{%
%   \noindent
%   \makebox[\cmdlabelwidth][l]{\inlinecode{#1}}%
%   \hspace{\cmdlabelsep}%
%   \parbox[t]{\dimexpr\linewidth-\cmdlabelwidth-\cmdlabelsep\relax}{#2}%
%   \par
% }

% PRÉREQUIS
\usepackage{environ}
\usepackage{ragged2e} % pour \RaggedRight

% style de code inline (ton tcolorbox)
% \usepackage[most]{tcolorbox}
% \newtcbox{\inlinecode}{nobeforeafter,
%   colframe=black!40, colback=black!5,
%   boxrule=0.4pt, arc=2pt,
%   boxsep=1pt, left=3pt, right=3pt, top=2pt, bottom=2pt,
%   tcbox raise base,
%   fontupper=\ttfamily\footnotesize
% }

% écart entre la colonne commande et la description
\newlength{\cmdlabelsep} \setlength{\cmdlabelsep}{0.4em}

% largeur “colonne commande” (calculée à la volée)
\newlength{\cmdlabelwidth}

% Définitions par défaut (pour éviter “undefined”)
% \newcommand{\cmditem}[2]{} % placeholder
% \newcommand{\cmdline}[2]{% rendu final d’une ligne
%   \noindent
%   \makebox[\cmdlabelwidth][l]{\inlinecode{#1}}%
%   \hspace{\cmdlabelsep}%
%   \begin{minipage}[t]{\dimexpr\linewidth-\cmdlabelwidth-\cmdlabelsep\relax}
%     \RaggedRight #2%
%   \end{minipage}\par
% }

% Bloc avec mesure automatique de la largeur max
% \NewEnviron{cmdblock}{%
%   % 1) Passe de mesure (aucune sortie)
%   \setlength{\cmdlabelwidth}{0pt}%
%   \setbox0=\vbox{%
%     \renewcommand{\cmditem}[2]{%
%       \sbox2{\inlinecode{##1}}%
%       \ifdim\wd2>\cmdlabelwidth
%         \global\setlength{\cmdlabelwidth}{\wd2}%
%       \fi
%     }%
%     \BODY
%   }%
%   % 2) Composition réelle
%   \renewcommand{\cmditem}[2]{\cmdline{##1}{##2}}%
%   \BODY
% }
\newenvironment{cmdblock}{%
  \par\setlength{\parindent}{0pt}\setlength{\parskip}{0pt}%
}{\par}

\newcommand{\cmditem}[2]{%
  \noindent\inlinecode{#1}\quad #2\par
}
% indentation supplémentaire pour les sous-lignes (options)
\newlength{\cmdoptindent}
\setlength{\cmdoptindent}{1em} % ajuste au goût

\newcommand{\cmdopt}[1]{%
  \hspace*{\cmdoptindent}%
  \begin{minipage}[t]{\dimexpr\linewidth-\cmdoptindent\relax}
    \RaggedRight #1%
  \end{minipage}\par
}

% \usepackage{xparse}
% \usepackage{tikz}
% \usetikzlibrary{shapes.geometric}
% % distance marge droite -> bord gauche de la règle
% \newlength{\mcRuleOffset}
% \setlength{\mcRuleOffset}{\dimexpr\columnsep/2 - \columnseprule/2\relax}

% % petit triangle contour, pointe vers la droite, collé à la règle
% \newcommand{\mcChevbox}[2]{%
%   \hbox to \linewidth{%
%     \hfil
%     \makebox[0pt][l]{\hskip \mcRuleOffset
%       \tikz[baseline]{%
%         \node[
%           isosceles triangle,
%           shape border rotate=-90,
%           draw, fill=none,
%           inner sep=0pt,
%           minimum width=#1,
%           minimum height=#2,
%           anchor=east
%         ] {};
%       }%
%     }%
%   }%
% }

% % \placeChevron[<largeur>=6pt][<hauteur>=8pt]
% \NewDocumentCommand{\placeChevron}{O{6pt} O{8pt}}{%
%   \begingroup
%   \ifhmode
%     \vadjust pre{\mcChevbox{#1}{#2}}%
%   \else
%     \nointerlineskip\smash{\mcChevbox{#1}{#2}}%
%   \fi
%   \endgroup
% }

\newcommand{\codefa}[2][]{%
  \raisebox{-0.15ex}{\faIcon[#1]{#2}}%
}
\begin{document}

\begin{multicols}{4}
\raggedbottom

\begin{tabularx}{\columnwidth}{lX}
    \raisebox{-2em}{\includegraphics[height=5em]{linux-logo.pdf}} &
    \begin{raggedright}
      {\Large \bf Linux / Unix} \\
      HEIG-VD -- version \revision \ -- \revisiondate \\
    \end{raggedright}
\end{tabularx}
Carte de référence des commandes et utilitaires Linux/Unix courants.
\begin{tabularx}{\columnwidth}{lX}
  \lstinline|[f]| & Nom de fichier \\
  \lstinline|[d]| & Nom de répertoire \\
  \lstinline|[cmd]| & Commande \\
  \lstinline|"s"| & Chaîne de caractères \\
\end{tabularx}

  % File:  {\scriptsize\faFileO\par}
  % Folder: {\scriptsize\faFolderO\par}

\section*{Raccourcis clavier Bash}
\subsection*{Mouvements}

\begin{tabularx}{\columnwidth}{lX}
\keys{\ctrl + B} & recule d'un caractère \\
\keys{\ctrl + F} & avance d'un caractère \\
\keys{\ctrl + A} & début de ligne \\
\keys{\ctrl + E} & fin de ligne \\
\keys{\Alt + B} & recule d'un mot \\
\keys{\Alt + F} & avance d'un mot \\
\end{tabularx}

\subsection*{Édition}

\keys{\ctrl + H} \quad comme backspace (\keys{\backspace}) \\
\keys{\ctrl + D} \quad comme delete (\keys{\del}) \\
\keys{\ctrl + U} \quad coupe du début au curseur \\
\keys{\ctrl + K} \quad coupe du curseur à la fin \\
\keys{\ctrl + W} \quad coupe le mot avant le curseur \\
\keys{\ctrl + Y} \quad colle le dernier texte coupé \\
\keys{\ctrl + T} \quad swap le char courant avec le préc. \\

\subsection*{Exécution / complétion}

\keys{\ctrl + J}, \keys{\ctrl + M} : exécuter (\keys{\return}) \\
\keys{\ctrl + I} : complétion (équiv. \keys{\tab}) \\
\keys{\tab}{} : auto-complétion \\

\subsection*{Contrôle / Appels système}

\keys{\ctrl + C} \quad interrompre (SIGINT) \\
\keys{\ctrl + Z} \quad suspendre (SIGTSTP) \\
\keys{\ctrl + L} \quad effacer l'écran (\lstinline|clear|) \\
\keys{\ctrl + D} \quad envoyer EOF (ferme le shell) \\

\subsection*{Historique / recherche}

\keys{\ctrl + R} \quad recherche historique \\
\keys{\ctrl + G} \quad annuler la recherche \\
\keys{\ctrl + P} \quad commande précédente \\
\keys{\ctrl + N} \quad commande suivante \\
\keys{\ctrl + S} \quad pause (débloquer: \keys{\ctrl + Q}) \\
\keys{\Alt}+\keys{<} \quad début de l'historique \\
\keys{\Alt}+\keys{>} \quad fin de l'historique \\
\keys{\Alt}+\keys{P} \quad préc. dans l'historique\\
\keys{\Alt}+\keys{N} \quad suiv. dans l'historique \\

\subsection*{Casse / mots}

\keys{\Alt + U} \quad majuscules (mot après) \\
\keys{\Alt + L} \quad minuscules (mot après) \\
\keys{\Alt + C} \quad capitalise la première lettre \\
\keys{\Alt + D} \quad supprime le mot après \\
\keys{\Alt + .} \quad insère le dernier argument \\

\section*{Sucres}
\lstcode{\~} \quad \lstcode{\$HOME} \\
\lstcode{.} \quad répertoire courant \\
\lstcode{..} \quad répertoire parent \\
\lstcode{!!} \quad dernière commande \\
\lstcode{!n} \quad commande \#n de l'historique \\
\lstcode{\$?} \quad code retour dernière commande \\
\lstcode{\$0} \quad nom du script \\
\lstcode{!*} \quad arguments ancienne command \\
\lstcode{\^abc\^123} \quad substitution dans dernière commande \\
\lstcode{`cmd`} obsolète, préférer \lstcode{\$(cmd)} \\
\lstcode{\$(cmd)} \quad substitution de commande \\
\lstcode{\${var}} \quad variable \\
\lstcode{{a,b,c}} \quad expansion par alternatives \\
\lstcode{{1..5}}, \lstcode{{a..e}} \quad expansions de séquence \\
\lstcode{\$(cmd1; cmd2)} \quad sous-coquille \\
\lstcode{\$(cmd \&)} \quad arrière-plan (sous-coquille) \\
\lstcode{\$(( expr ))} \quad arithmétique \\

\section*{Redirections / pipes}
\begin{cmdblock}
\cmditem{cmd > f}{stdout \textrightarrow{} fichier (x)}
\cmditem{cmd >> f}{stdout \textrightarrow{} fichier (a)}
\cmditem{cmd 2> f}{stderr \textrightarrow{} fichier (x)}
\cmditem{cmd \&> f}{stdout+stderr \textrightarrow{} fichier (x)}
\cmditem{cmd \&>> f}{stdout+stderr \textrightarrow{} fichier (a)}
\cmditem{cmd < f}{stdin depuis fichier}
\cmditem{cmd << EOF}{heredoc (jusqu'à EOF)}
\cmditem{cmd <<< "s"}{here-string (inject sur stdin)}
\cmditem{cmd1 | cmd2}{pipe (stdout \textrightarrow{} stdin)}
\cmditem{cmd1 |\& cmd2}{pipe (stdout+stderr \textrightarrow{} stdin)}
\end{cmdblock}

\section*{Commandes de base}
\begin{cmdblock}
\cmditem{uname -a}{informations système}
\cmditem{uptime}{temps de fonctionnement}
\cmditem{date}{date et l'heure actuelles}
\cmditem{cal}{calendrier du mois en cours}
\cmditem{whoami}{nom de l'utilisateur courant}
\end{cmdblock}

\section*{Fichiers / répertoires}

\begin{cmdblock}
  \cmditem{pwd}{chemin répertoire courant}
  \cmditem{ls}{liste les fichiers}
  \cmdopt{\lstcode{-l} détails, \lstcode{-a} fichiers cachés,
          \lstcode{-h} tailles lisibles, \lstcode{-R} récursif,
          \lstcode{-t} trier par date, \lstcode{-r} ordre inverse,
          \lstcode{-Q} guillemets, \lstcode{-i} inode,
          \lstcode{-d} répertoires seulement, \lstcode{-S} trier par taille,
          \lstcode{-1} un par ligne}
  \cmditem{cd [d]}{change de répertoire}
  \cmditem{touch [f]}{crée fichier vide ou met à jour date}
  \cmditem{mkdir [d]}{crée un répertoire.}
  \cmdopt{\lstcode{-v} verbeux,
    \lstcode{-p} parents si besoin,
    \lstcode{-m [perms]} permissions}
  \cmditem{rmdir [d]}{supprime un répertoire vide}
  \cmditem{rm [f]}{supprime un fichier.}
  \cmdopt{\lstcode{-i} interactif,
    \lstcode{-f} force,
    \lstcode{-v} verbeux,
    \lstcode{-r} récursif}

  \cmditem{cp [src] [dst]}{copie un fichier/répertoire.}
  \cmdopt{\lstcode{-a} archive (récursif + attributs),
    \lstcode{-i} interactif,
    \lstcode{-f} force,
    \lstcode{-v} verbeux,
    \lstcode{-r} récursif}
  \cmditem{mv [src] [dst]}{déplace/renomme.}
  \cmdopt{\lstcode{-i} interactif,
    \lstcode{-i} interactif,
    \lstcode{-f} force,
    \lstcode{-v} verbeux}
\end{cmdblock}

\section*{Exécution de commandes}
\lstcode{source [fichier]} \\
\lstcode{./[fichier]} (exécutable) \\

\section*{Consultation de fichiers}

\begin{cmdblock}
\cmditem{file [f]}{type du fichier}
\cmditem{stat [f]}{infos détaillées}
\cmditem{wc [f]}{compte occurences}
\cmdopt{\lstcode{-l} lignes, \lstcode{-w} mots, \lstcode{-c} caractères}
\cmditem{head [f]}{affiche premières lignes}
\cmdopt{\lstcode{-n N} N premières lignes}
\cmditem{tail [f]}{affiche les dernières lignes}
\cmdopt{\lstcode{-n N} N dernières lignes,
        \lstcode{-f} temps réel}
\cmditem{less [f]}{affiche page par page}
\cmditem{cat [f]}{affiche le contenu}
\cmditem{hexdump -C [f]}{affiche en hexadécimal}
\cmditem{diff [f1] [f2]}{comparaison ligne par ligne}
\end{cmdblock}

\section*{Variables d'environnement}
\begin{cmdblock}
\cmditem{set}{liste variables et fonctions}
\cmditem{env}{liste les variables d'env.}
\cmditem{export VAR=[s]}{crée/mod. variable d'env.}
\cmditem{echo \$VAR}{affiche valeur variable}
\cmditem{\$PATH}{chemin des exécutables}
\cmditem{\$HOME}{répertoire personnel}
\cmditem{\$SHELL}{interpréteur de commandes}
\cmditem{\$USER}{nom de l'utilisateur}
\cmditem{\$PS1}{invite de commande}
\cmditem{\$PWD}{répertoire courant}
\cmditem{\$OLDPWD}{répertoire précédent}
\end{cmdblock}

\section*{Processus / jobs}
\begin{cmdblock}
\cmditem{[cmd]\&}{exécute en arrière-plan}
\cmditem{jobs}{liste les jobs en cours}
\cmditem{wait [PID]}{attend la fin d'un job}
\cmditem{disown [PID]}{détache un job du shell}
\cmditem{fg [j]}{ramène un job au premier plan}
\cmditem{bg [j]}{relance un job en arrière-plan}
\cmditem{ps aux}{liste les processus}
\cmditem{kill [pid]}{termine un processus}
\cmditem{killall [p]}{termine tous les processus nommés}
\cmditem{top}{moniteur de processus}
\cmditem{htop}{top amélioré (si installé)}

\end{cmdblock}

\section*{Archives / compression}
\textbf{\lstinline|.tar.gz|} : \lstinline|tar -czvf archive.tar.gz [f]| \\
\lstinline|tar -xzvf archive.tar.gz| \\
\textbf{\lstinline|.zip|} : \lstinline|zip archive.zip [f]| \quad \lstinline|unzip archive.zip| \\
\textbf{\lstinline|.tar.xz|} : \lstinline|tar -cJvf| / \lstinline|tar -xJvf| \\
\textbf{\lstinline|.7z|} : \lstinline|7z a archive.7z [f]| \quad \lstinline|7z x archive.7z| \\
\textbf{bsdtar} : \lstinline|bsdtar -xf [archive]|, \lstinline|bsdtar -cf [arch] [f]|, \lstinline|bsdtar -tf [arch]| \\

\section*{Permissions / utilisateurs}

\begin{cmdblock}
\cmditem{chmod}{modifie les permissions}
\cmdopt{\lstcode{u} user, \lstcode{g} group, \lstcode{o} others, \lstcode{a} all,
        \lstcode{+} add, \lstcode{-} remove, \lstcode{=} set exactly}
\cmditem{chown}{change le propriétaire}
\cmditem{chgrp}{change le groupe}
\cmditem{umask}{masque de création de fichiers}
\cmditem{sudo [cmd]}{exécute en superutilisateur}
\cmditem{su [utilisateur]}{change d'utilisateur}
\cmditem{who}{qui est connecté}
\cmditem{w}{qui est connecté et que font-ils}
\cmditem{id}{informations sur l'utilisateur courant}
\cmditem{groups}{groupes de l'utilisateur courant}
\cmditem{passwd}{change le mot de passe}
\end{cmdblock}

\textit{bits :} 1 x, 2 w, 4 r \\
Exemples : \lstinline|chmod 755 f| (\lstinline|rwxr-xr-x|), \lstinline|chmod 644 f|, \lstinline|chmod u+x f|, \lstinline|chmod g-w f|, \lstinline|chmod o=r f|, \lstinline|chmod a+x f| \\

\section*{less / more / man}
Espace: page suivante \quad \keys{b}: page précédente \\
\keys{\return}{}: ligne suivante \quad \keys{y}: ligne précédente \\
\keys{/}: rechercher \quad \keys{n}/\keys{N}: suivant/précédent \\
\keys{g}/\keys{G}: début/fin \quad \keys{q}: quitter \\
\keys{h}: aide \quad \keys{m}: marque-page \\
\keys{'}: aller au marque-page \quad \keys{`}: revenir \\
\keys{+} \& \keys{-} + numéro : aller à la ligne \\

\section*{Git}
\begin{cmdblock}
\cmditem{git init}{initialise un dépôt git}
\cmditem{git status}{statut du dépôt}
%\cmditem{git remote add origin [url]}{ajoute une origine}
\cmditem{git remote -v}{liste les origines}
\cmditem{git fetch}{récupère les changements distants}
\cmditem{git pull}{récupère et fusionne les changements distants}
\cmditem{git push}{pousse les changements locaux}
\cmditem{git clone [url]}{clone un dépôt distant}
\cmditem{git branch}{liste les branches}
\cmditem{git branch [br]}{crée une branche}
\cmditem{git checkout [br]}{change de branche}
\cmditem{git commit -m "s"}{crée un commit}
\cmditem{git add [f]}{ajoute un fichier au commit}
\cmditem{git log}{historique des commits}
\cmdopt{\lstcode{--oneline} résumé, \lstcode{--graph} graphe,
        \lstcode{--stat} stats, \lstcode{-p} diff}
\end{cmdblock}

\section*{GCC}
\begin{cmdblock}
\cmditem{gcc [f.c]}{compile un fichier C}
\cmdopt{\lstcode{-o f} nom de l'exécutable,
        \lstcode{-Wall} tous les avertissements,
        \lstcode{-Wextra} avertissements supplémentaires,
        \lstcode{-g} infos debug,
        \lstcode{-O0, -O1, -O2, -O3} optimisation,
        \lstcode{-std=c17} standard C,
        \lstcode{-I dir} inclure répertoire dir,
        \lstcode{-L dir} lier répertoire dir,
        \lstcode{-l lib} lier la bibliothèque lib
        \lstcode{-c} compiler seulement (pas linker)}
\cmditem{g++ [f.cpp]}{compile un fichier C++}
\end{cmdblock}

\section*{Recherche}
\lstinline|grep "texte" [f]| (\lstinline|-P -r -i -v -n -c -l -w -A n -B n -C n -o|) \\
\lstinline|rg "texte" [rep]| (\lstinline|--json|) \\

\section*{Remplacement}
\begin{cmdblock}
\cmditem{sed 's/search/new/g' [f]}{remplace avec BRE regex}
\cmdopt{\lstcode{-i} modifie le fichier,
        \lstcode{-n} n'affiche rien par défaut,
        \lstcode{-E} regex étendues,
        \lstcode{-e} script, \lstcode{-r} regex étendues}
\cmditem{perl -pe 's/search/new/g' [f]}{remplace avec regex Perl}
\cmdopt{\lstcode{-i} modifie le fichier,
        \lstcode{-n} n'affiche rien par défaut,
        \lstcode{-e} script, \lstcode{-l} gère les nouvelles lignes}
\cmditem{perl -0777 -pe 's/search/new/gs' [f]}{remplace sur tout le fichier}
\end{cmdblock}

\section*{Utilitaires}
\begin{cmdblock}
\cmditem{uniq [f]}{filtre les lignes consécutives identiques}
\cmdopt{\lstcode{-c} compte, \lstcode{-d} que les doublons,
        \lstcode{-u} que les uniques, \lstcode{-i} ignore la casse}
\cmditem{sort [f]}{trie les lignes}
\cmdopt{\lstcode{-r} inverse, \lstcode{-n} numérique,
        \lstcode{-k n} clé n, \lstcode{-u} unique,
        \lstcode{-t x} séparateur x}
\cmditem{cut -d x -f n [f]}{extrait le champ n, séparé par x}
\cmditem{awk '{print \$n}' [f]}{extrait le champ n (espace séparateur)}
\cmditem{xargs [cmd]}{construit des lignes de commande}
\cmdopt{\lstcode{-n N} N arguments par commande,
        \lstcode{-I \{\}} remplace \{\} par l'argument}
\cmditem{tr 'set1' 'set2'}{remplace set1 par set2}
\cmdopt{\lstcode{-d} supprime set1, \lstcode{-s} squeeze}
\cmditem{tee [f]}{duplique le flux vers un fichier}
\cmdopt{\lstcode{-a} ajoute au fichier, \lstcode{-i} ignore les signaux}
\end{cmdblock}

\section*{Aide}
\begin{cmdblock}
\cmditem{help [cmd]}{aide interne bash}
\cmditem{[cmd] --help}{aide d'une commande}
\cmditem{man [cmd]}{manuel d'une commande}
\cmditem{apropos [terme]}{cherche dans les manuels}
\cmditem{whatis [cmd]}{description commande}
\end{cmdblock}

\emph{Sections du manuel: 1 utilisateur, 2 syscalls, 3 lib, 4 spéciaux, 5 formats, 6 jeux, 7 divers, 8 admin} \\

\section*{Gestion Réseau}
\begin{cmdblock}
\cmditem{ip a}{liste adresses IP}
\cmditem{ip r}{table de routage}
\cmditem{ping [hôte]}{teste la connectivité}
\cmditem{ss -tuln}{sockets réseau}
\cmditem{dig [hôte]}{résolution DNS avancée}
\end{cmdblock}

\section*{Internet}
\begin{cmdblock}
\cmditem{ssh user@host}{connexion SSH}
\cmditem{scp [src] [dst]}{copie sécurisée}
\cmditem{wget [url]}{télécharge un fichier}
\cmdopt{\lstcode{-O f} fichier de sortie,
        \lstcode{-c} reprendre, \lstcode{-q} silencieux,
        \lstcode{--limit-rate=100k} limite le débit}
\cmditem{curl [url]}{transfère une URL}
\cmdopt{\lstcode{-o f} fichier de sortie,
        \lstcode{-O} nomme comme l'original,
        \lstcode{-L} suivre redirections,
        \lstcode{-I} en-têtes seulement,
        \lstcode{-d data} données POST,
        \lstcode{-H 'Hdr: v'} ajoute un en-tête}
\cmditem{lynx [url]}{navigateur web en console}
\end{cmdblock}

\section*{Env. virtuels Python}
\lstinline|uv venv venv| \quad \lstinline|source venv/bin/activate| \\
\lstinline|deactivate| \\
\lstinline|pip install pkg| \quad \lstinline|pip uninstall pkg| \\
\lstinline|pip list| \quad \lstinline|uv add pkg| \\
\lstinline|pipx install pkg| \\

\section*{APT (Debian/Ubuntu)}
\begin{cmdblock}
\cmditem{apt update}{met à jour liste des paquets}
\cmditem{apt upgrade}{met à jour les paquets installés}
\cmditem{apt install [pkg]}{installe un paquet}
\cmditem{apt remove [pkg]}{désinstalle un paquet}
\cmditem{apt search [terme]}{cherche un paquet}
\cmditem{apt show [pkg]}{informations sur un paquet}
\cmditem{apt autoremove}{supprime dépendances inutiles}
\end{cmdblock}

\section*{À installer (exemples)}
\textbf{Manuels FR} : \lstinline|sudo apt install manpages-fr manpages-fr-extra| \\
\textbf{Dev} : \lstinline|sudo apt install build-essential git curl wget vim htop| \\
\textbf{Réseau} : \lstinline|sudo apt install net-tools iputils-ping traceroute dnsutils| \\

\section*{Fun}

\begin{cmdblock}
\cmditem{cowsay "s"}{phylactere et vache}
\cmditem{fortune}{citation aléatoire }
\cmditem{sl}{locomotive à vapeur }
\cmditem{cmatrix}{effet Matrix }
\cmditem{toilet "s"}{texte ASCII art }
\cmditem{lolcat}{texte coloré }
\end{cmdblock}

\section*{Substituts modernes}

\begin{tabularx}{\columnwidth}{lX}
lsd & Substitut de ls  \\
batcat& Substitut de cat avec coloration syntaxique  \\
fd & Substitut de find  \\
ripgrep (rg) & Substitut de grep  \\
sd & Substitut de sed  \\
hexyl & Substitut de hexdump  \\
broot & Explorateur de fichiers en ligne de commande  \\
fzf & Outil de recherche floue  \\
git-delta & Substitut de git diff avec coloration syntaxique \\
\end{tabularx}

\end{multicols}
\end{document}
